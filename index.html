<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Battle Royale</title>

<style>
/* --- GLOBAL --- */
body {
    margin:0;
    overflow:hidden;
    font-family:Arial, sans-serif;
    color:white;
}

/* ----- BACKGROUND LOBBY ----- */
#background {
    position:fixed;
    width:100vw;
    height:100vh;
    background:linear-gradient(160deg, #0c1437, #13296b);
}

.grid {
    position:absolute;
    width:200%;
    height:200%;
    background-image:
      linear-gradient(transparent 97%, rgba(0,170,255,0.2)),
      linear-gradient(90deg, transparent 97%, rgba(0,170,255,0.2));
    background-size:50px 50px;
    animation:gridMove 20s linear infinite;
    opacity:0.2;
}
@keyframes gridMove {
    from { transform:translate(0,0); }
    to   { transform:translate(-200px,-200px); }
}

/* ----- LOBBY ----- */
#lobby {
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
}

#character {
    width:260px;
    height:480px;
    background:linear-gradient(#4fc5ff, #1e6bb8);
    border-radius:20px;
    box-shadow:0 0 20px #008cff77;
}

#rightPanel {
    position:absolute;
    right:40px;
    top:50%;
    transform:translateY(-50%);
}

.modeBtn {
    width:220px;
    padding:18px 0;
    margin:10px 0;
    background:#0b224d;
    border:2px solid #00aaff;
    border-radius:10px;
    cursor:pointer;
    text-align:center;
    font-size:22px;
}
.modeBtn:hover {
    background:#144d88;
    transform:scale(1.05);
}

#playBtn {
    position:absolute;
    bottom:60px;
    left:50%;
    transform:translateX(-50%);
    padding:20px 70px;
    font-size:30px;
    background:#00aaff;
    border-radius:14px;
    cursor:pointer;
}
#playBtn:hover {
    background:#33c3ff;
    transform:translateX(-50%) scale(1.07);
}

/* ----- GAME MAP ----- */
#game {
    display:none;
    width:100vw;
    height:100vh;
    overflow:hidden;
    background:black;
}

#map {
    width:3000px;
    height:3000px;
    background:#3ea34d;
    position:absolute;
}

.player {
    width:30px;
    height:30px;
    background:yellow;
    position:absolute;
}

.chest {
    width:20px;
    height:20px;
    background:orange;
    position:absolute;
    cursor:pointer;
}

.zone {
    border:4px solid cyan;
    border-radius:50%;
    position:absolute;
}
</style>
</head>

<body>

<!-- ---------- LOBBY ---------- -->
<div id="background"><div class="grid"></div></div>

<div id="lobby">

    <div id="character"></div>

    <div id="rightPanel">
        <div class="modeBtn" onclick="selectMode('SOLO')">SOLO</div>
        <div class="modeBtn" onclick="selectMode('DUO')">DUO</div>
        <div class="modeBtn" onclick="selectMode('SECTION')">SECTION</div>
    </div>

    <div id="playBtn" onclick="startGame()">JOUER</div>
</div>

<!-- ---------- GAME ---------- -->
<div id="game">
    <div id="map"></div>
    <div id="zone" class="zone"></div>
    <div id="player" class="player"></div>
</div>

<script>
/*--------------- MODE SELECT ---------------*/
let selectedMode = "SOLO";
function selectMode(m) { selectedMode = m; }

/*--------------- VARIABLES JEU ---------------*/
let player = { x:1500, y:1500, speed:5 };
let keys = {};
let zoneSize = 1800;
let zonePhase = 1;
let maxPhase = 8;
let zoneDamage = 1;

/*--------------- LANCER LE JEU ---------------*/
function startGame() {
    document.getElementById("lobby").style.display = "none";
    document.getElementById("game").style.display = "block";

    spawnChests(60);
    updateZone();
    gameLoop();
}

/*--------------- DEPLACEMENTS ---------------*/
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup",   e => keys[e.key] = false);

function movePlayer() {
    if (keys["z"]) player.y -= player.speed;
    if (keys["s"]) player.y += player.speed;
    if (keys["q"]) player.x -= player.speed;
    if (keys["d"]) player.x += player.speed;

    let p = document.getElementById("player");
    p.style.left = player.x + "px";
    p.style.top  = player.y + "px";

    document.getElementById("map").style.left = (-player.x + window.innerWidth/2) + "px";
    document.getElementById("map").style.top  = (-player.y + window.innerHeight/2) + "px";
}

/*--------------- ZONE ---------------*/
function updateZone() {
    let z = document.getElementById("zone");

    z.style.width = zoneSize + "px";
    z.style.height = zoneSize + "px";
    z.style.left = (1500 - zoneSize/2) + "px";
    z.style.top  = (1500 - zoneSize/2) + "px";

    if (zonePhase <= 3) zoneDamage = 1;
    else if (zonePhase <= 5) zoneDamage = 2;
    else zoneDamage = 5;

    if (zonePhase < maxPhase) {
        zoneSize -= 200;
        zonePhase++;
        setTimeout(updateZone, 7000);
    }
}

/*--------------- COFFRES ---------------*/
function spawnChests(n) {
    let map = document.getElementById("map");

    for (let i = 0; i < n; i++) {
        let c = document.createElement("div");
        c.className = "chest";
        c.style.left = Math.random() * 2800 + "px";
        c.style.top  = Math.random() * 2800 + "px";
        c.onclick = () => c.remove();
        map.appendChild(c);
    }
}

/*--------------- GAME LOOP ---------------*/
function gameLoop() {
    movePlayer();
    requestAnimationFrame(gameLoop);
}
</script>

</body>
</html>
